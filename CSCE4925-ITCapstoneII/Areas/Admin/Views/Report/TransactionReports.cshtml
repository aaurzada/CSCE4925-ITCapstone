@model SQLSolutions.Areas.Admin.ViewModels.TransactionReportList
@using SelectListItem = System.Web.WebPages.Html.SelectListItem

@{
    ViewBag.Title = "Details";
}

<div>
    <h2>
        Transaction Reports
        <div style="float: right; font-size: 14px; padding-top: 15px;">
            @Html.ActionLink("Export to Excel", "Export")
        </div>
    </h2>
 </div>

@using (Html.BeginForm("TransactionReports", "Report", FormMethod.Post))
{
    <div class="row" id="search-group">
        @Html.AntiForgeryToken()
        @Html.ValidationSummary()

        <div>
            <div class="col-md-2" style="padding-right: 5px;">
                @Html.DropDownList("Selected", (IEnumerable<System.Web.Mvc.SelectListItem>)ViewBag.Selected, new { @id = "selectList", @class = "form-control" })
            </div>
            <div class="col-md-4" style="padding-left: 0; padding-right: 30px;">

                @Html.TextBox("searchValue", ViewBag.currentFilter as string, new { @class = "form-control", @placeholder = "Search" })
            </div>
        </div>

        <div class=" col-md-2" style="padding-right: 5px;">
            @Html.TextBox("begin", ViewBag.currentBegin as string, new
                {
                    @id = "datepicker",
                    @class = "form-control",
                    @placeholder = "Begin Date",

                })
            @*<input type="text" id="datepicker" name="begin" class="form-control" placeholder="Begin Date">*@
        </div>
        <div class="col-md-2" style="padding-left: 0;">
            @Html.TextBox("end", ViewBag.currentEnd as string, new
                    {
                        @id = "datepicker2",
                        @class = "form-control",
                        @placeholder = "End Date",

                    })
            @*<input type="text" id="datepicker2" name="end" class="form-control" placeholder="End Date">*@
        </div>

        <button class="btn btn-default" type="submit">
            <i class="glyphicon glyphicon-search"></i>
            Search
        </button>

        <a href="@Url.Action("TransactionReports")" class="btn btn-warning" style="float: right; margin-right: 17px;">
            Reset
        </a>
    </div>

}




<table class="table" id="report">
    <tr>

        <th class="row-trans-id">
            @Html.DisplayName("EUID")
        </th>
        <th class="row-trans-name">
            @Html.DisplayName("Name")
        </th>
        <th class="row-trans-email">
            @Html.DisplayName("Email")
        </th>
        <th class="row-trans-isbn">
            @Html.DisplayName("ISBN")
        </th>
        <th class="row-trans-title">
            @Html.DisplayName("Title")
        </th>
        <th class="row-trans-author">
            @Html.DisplayName("Author")
        </th>
        <th class="row-trans-course">
            @Html.DisplayName("Course")
        </th>
        <th class="row-trans-out">
            @Html.DisplayName("Checkout Date")
        </th>
        <th class="row-trans-due">
            @Html.DisplayName("Due Date")
        </th>
        <th class="row-trans-in">
            @Html.DisplayName("Checkin Date")
        </th>
        <th class="row-trans-year">
            @Html.DisplayName("Year")
        </th>
        <th class="row-trans-edition">
            @Html.DisplayName("Edition")
        </th>
        <th class="row-trans-required">
            @Html.DisplayName("Required")
        </th>
        <th class="row-trans-asset">
            @Html.DisplayName("Asset Num")
        </th>
        @*<th></th>*@
    </tr>

    @foreach (var item in Model.TransactionReports)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Euid)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FirstName)

                @Html.DisplayFor(modelItem => item.LastName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Isbn)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Title)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Author)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CourseSection)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CheckoutDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DueDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CheckInDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Year)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Edition)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.IsRequired)
                @*@(item.IsRequired == "0" ? Html.DisplayName("No") : Html.DisplayFor(modelItem => item.IsRequired))*@
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.AssetNum)
            </td>

        </tr>
    }


</table>
@*check if search returned any results, if not display the error message*@
@if (!Model.TransactionReports.Any())
{
    @Html.DisplayName("No records were found")
}



    @*display pagination*@
   
    @Html.PagedListPager(Model.TransactionReports, page => Url.Action("TransactionReports",
                      new
                      {
                          page,
                          selected = ViewBag.currentSelect,
                          currentFilter = ViewBag.CurrentFilter,
                          begin = ViewBag.currentBegin,
                          end = ViewBag.currentEnd
                      }))
    